{"ast":null,"code":"import _objectSpread from\"/Users/wonjikyang/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/wonjikyang/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wonjikyang/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/wonjikyang/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/wonjikyang/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/wonjikyang/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import classes from'./Layout.module.css';import Mixer from'../../Components/Mixer/Mixer';import Visualisation from'../../Components/Visualisation/Visualisation';import _ from'lodash';var Layout=/*#__PURE__*/function(_React$Component){_inherits(Layout,_React$Component);function Layout(){var _getPrototypeOf2;var _this;_classCallCheck(this,Layout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Layout)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={};_this.pushQueries=function(value){var oldParameters,queryType;oldParameters=_objectSpread({},_this.props.query);queryType=Object.keys(value)[0];oldParameters[queryType]=value[queryType];var updatedParams=[];for(var i in oldParameters){updatedParams.push(encodeURIComponent(i)+\"=\"+encodeURIComponent(oldParameters[i]));}_this.props.history.push({pathname:_this.props.history.location.pathname,search:\"?\"+updatedParams.join(\"&\")});};return _this;}_createClass(Layout,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,data=_this$props.data,shape=_this$props.shape,history=_this$props.history,query=_this$props.query,keyFigureList=_this$props.keyFigureList;//Set searchbar options\nvar dataLanguage='Country';if(query.lang==='fr')dataLanguage='Country_FR';data.sort(function(a,b){return a.ISO-b.ISO;});var countryList=_.chain(data).map(function(c){return{value:c.ISO,label:c[dataLanguage]};}).sort(function(a,b){return a.value-b.value;}).chunk(50).value();var options=[{label:query.lang==='en'?'Regions':'Régions',options:sortAlphabetically(countryList[1])},{label:query.lang==='en'?'Countries':'Pays',options:sortAlphabetically(countryList[0])}];function sortAlphabetically(data){return data.sort(function(a,b){return a.label.localeCompare(b.label);});}if(data.length===0||Object.entries(query).length===0){return React.createElement(\"div\",null,\" Loading ...\");}else{return React.createElement(\"div\",{className:classes.Layout},React.createElement(Mixer,{shape:shape,countryList:options,query:query,onKeyFigureChange:function onKeyFigureChange(e){return _this2.pushQueries({keyfigure:keyFigureList[e.value-1].type});},keyFigureList:keyFigureList,language:query.lang,onSearchChange:function onSearchChange(e){return _this2.pushQueries({country:e.value});}}),React.createElement(Visualisation,{query:query,history:history,onKeyFigureChange:function onKeyFigureChange(e){return _this2.pushQueries({keyfigure:keyFigureList[e.value-1].type});},language:query.lang,data:data[query.country-1],keyFigureList:keyFigureList}));}}}]);return Layout;}(React.Component);export default Layout;","map":{"version":3,"sources":["/Users/wonjikyang/Desktop/pac-digitalstories/src/Container/Layout/Layout.js"],"names":["React","classes","Mixer","Visualisation","_","Layout","state","pushQueries","value","oldParameters","queryType","props","query","Object","keys","updatedParams","i","push","encodeURIComponent","history","pathname","location","search","join","data","shape","keyFigureList","dataLanguage","lang","sort","a","b","ISO","countryList","chain","map","c","label","chunk","options","sortAlphabetically","localeCompare","length","entries","e","keyfigure","type","country","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport classes from './Layout.module.css';\nimport Mixer from '../../Components/Mixer/Mixer';\nimport Visualisation from '../../Components/Visualisation/Visualisation';\nimport _ from 'lodash';\n\nclass Layout extends React.Component {\n    state = { }\n\n    pushQueries = value => {\n\n        let oldParameters, queryType;\n        oldParameters = { ...this.props.query };\n        queryType = Object.keys(value)[0];\n        oldParameters[queryType] = value[queryType];\n        const updatedParams = [];\n\n        for (let i in oldParameters) {\n            updatedParams.push(\n                encodeURIComponent(i) + \"=\" + encodeURIComponent(oldParameters[i])\n                );\n            }\n\n        this.props.history.push({\n\t\t\tpathname: this.props.history.location.pathname,\n\t\t\tsearch: \"?\" + updatedParams.join(\"&\")\n\t\t});\n\t}\n    \n    render() {\n        const { \n            data, shape,\n            history,\n            query,\n            keyFigureList,\n        } = this.props;\n\n        //Set searchbar options\n        let dataLanguage = 'Country'\n        if ( query.lang === 'fr') dataLanguage='Country_FR';\n        data.sort((a, b) => a.ISO - b.ISO);\n        let countryList = _.chain(data)\n            .map(c => ({ value: c.ISO, label: c[dataLanguage] }))\n            .sort((a,b) => a.value - b.value)\n            .chunk(50)\n            .value()\n\n        let options = [\n            { label: query.lang === 'en' ? 'Regions' : 'Régions',\n                 options: sortAlphabetically(countryList[1]) },\n            { label: query.lang === 'en' ? 'Countries' : 'Pays',\n                 options: sortAlphabetically(countryList[0]) }\n        ];\n         \n        function sortAlphabetically(data) {\n            return data.sort((a,b) => a.label.localeCompare(b.label));\n        }\n\n        if ( data.length === 0 ||\n            Object.entries(query).length ===0 ){\n                return <div> Loading ...</div>\n            } else {\n                return (\n                    <div className={classes.Layout}>\n                        <Mixer \n                            shape={shape}\n                            countryList={options}\n                            query={query}\n                            onKeyFigureChange={e => this.pushQueries({ \n                                keyfigure: keyFigureList[e.value -1 ].type\n                            })}\n                            keyFigureList={keyFigureList}\n                            language={query.lang}\n                            onSearchChange={e => this.pushQueries({ country: e.value })}\n                        />\n                        <Visualisation \n                            query={query}\n                            history={history}\n                            onKeyFigureChange={e => this.pushQueries({ \n                                keyfigure: keyFigureList[e.value -1 ].type\n                            })}\n                            language={query.lang}\n                            data={data[query.country - 1]}\n                            keyFigureList={keyFigureList}\n                        />\n                    </div>\n                )\n        }   \n    }\n}\n\n\nexport default Layout;"]},"metadata":{},"sourceType":"module"}