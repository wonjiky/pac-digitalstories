{"ast":null,"code":"import _objectSpread from\"/Users/wonjiky/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/wonjiky/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wonjiky/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/wonjiky/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/wonjiky/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/wonjiky/Desktop/pac-digitalstories/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import classes from'./Layout.module.css';import Mixer from'../../Components/Mixer/Mixer';import Visualisation from'../../Components/Visualisation/Visualisation';var Layout=/*#__PURE__*/function(_React$Component){_inherits(Layout,_React$Component);function Layout(){var _getPrototypeOf2;var _this;_classCallCheck(this,Layout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Layout)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={};_this.pushQueries=function(value){var oldParameters,queryType;oldParameters=_objectSpread({},_this.props.query);queryType=Object.keys(value)[0];oldParameters[queryType]=value[queryType];var updatedParams=[];for(var i in oldParameters){updatedParams.push(encodeURIComponent(i)+\"=\"+encodeURIComponent(oldParameters[i]));}_this.props.history.push({pathname:_this.props.history.location.pathname,search:\"?\"+updatedParams.join(\"&\")});};return _this;}_createClass(Layout,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,data=_this$props.data,history=_this$props.history,query=_this$props.query,keyFigureList=_this$props.keyFigureList;//Set searchbar options\nvar dataLanguage='Country';if(history.location.pathname==='/fr')dataLanguage='Country_FR';var countryList=data.map(function(c){return{value:c.ISO,label:c[dataLanguage]};});if(data.length===0||Object.entries(query).length===0){return React.createElement(\"div\",null,\" Loading ...\");}else{return React.createElement(\"div\",{className:classes.Layout},React.createElement(Mixer,{countryList:countryList,query:query,onSearchChange:function onSearchChange(e){return _this2.pushQueries({country:e.value});}}),React.createElement(Visualisation,{query:query,history:history,onKeyFigureChange:function onKeyFigureChange(e){return _this2.pushQueries({keyfigure:keyFigureList[e.target.value-1].type});},language:history.location.pathname,data:data[query.country-1],keyFigureList:keyFigureList}));}}}]);return Layout;}(React.Component);export default Layout;","map":{"version":3,"sources":["/Users/wonjiky/Desktop/pac-digitalstories/src/Container/Layout/Layout.js"],"names":["React","classes","Mixer","Visualisation","Layout","state","pushQueries","value","oldParameters","queryType","props","query","Object","keys","updatedParams","i","push","encodeURIComponent","history","pathname","location","search","join","data","keyFigureList","dataLanguage","countryList","map","c","ISO","label","length","entries","e","country","keyfigure","target","type","Component"],"mappings":"qvBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,8BAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,8CAA1B,C,GAGMC,CAAAA,M,2YACFC,K,CAAQ,E,OAERC,W,CAAc,SAAAC,KAAK,CAAI,CAEnB,GAAIC,CAAAA,aAAJ,CAAmBC,SAAnB,CACAD,aAAa,kBAAQ,MAAKE,KAAL,CAAWC,KAAnB,CAAb,CACAF,SAAS,CAAGG,MAAM,CAACC,IAAP,CAAYN,KAAZ,EAAmB,CAAnB,CAAZ,CACAC,aAAa,CAACC,SAAD,CAAb,CAA2BF,KAAK,CAACE,SAAD,CAAhC,CACA,GAAMK,CAAAA,aAAa,CAAG,EAAtB,CAEA,IAAK,GAAIC,CAAAA,CAAT,GAAcP,CAAAA,aAAd,CAA6B,CACzBM,aAAa,CAACE,IAAd,CACIC,kBAAkB,CAACF,CAAD,CAAlB,CAAwB,GAAxB,CAA8BE,kBAAkB,CAACT,aAAa,CAACO,CAAD,CAAd,CADpD,EAGC,CAEL,MAAKL,KAAL,CAAWQ,OAAX,CAAmBF,IAAnB,CAAwB,CAC7BG,QAAQ,CAAE,MAAKT,KAAL,CAAWQ,OAAX,CAAmBE,QAAnB,CAA4BD,QADT,CAE7BE,MAAM,CAAE,IAAMP,aAAa,CAACQ,IAAd,CAAmB,GAAnB,CAFe,CAAxB,EAIN,C,yEAEW,iCAMD,KAAKZ,KANJ,CAEDa,IAFC,aAEDA,IAFC,CAGDL,OAHC,aAGDA,OAHC,CAIDP,KAJC,aAIDA,KAJC,CAKDa,aALC,aAKDA,aALC,CAQL;AACA,GAAIC,CAAAA,YAAY,CAAG,SAAnB,CACA,GAAKP,OAAO,CAACE,QAAR,CAAiBD,QAAjB,GAA8B,KAAnC,CAA0CM,YAAY,CAAC,YAAb,CAC1C,GAAIC,CAAAA,WAAW,CAAGH,IAAI,CAACI,GAAL,CAAS,SAAAC,CAAC,QAAK,CAAErB,KAAK,CAAEqB,CAAC,CAACC,GAAX,CAAgBC,KAAK,CAAEF,CAAC,CAACH,YAAD,CAAxB,CAAL,EAAV,CAAlB,CAIA,GAAKF,IAAI,CAACQ,MAAL,GAAgB,CAAhB,EACDnB,MAAM,CAACoB,OAAP,CAAerB,KAAf,EAAsBoB,MAAtB,GAAgC,CADpC,CACuC,CAC/B,MAAO,+CAAP,CACH,CAHL,IAGW,CACH,MACI,4BAAK,SAAS,CAAE9B,OAAO,CAACG,MAAxB,EACI,oBAAC,KAAD,EACI,WAAW,CAAEsB,WADjB,CAEI,KAAK,CAAEf,KAFX,CAGI,cAAc,CAAE,wBAAAsB,CAAC,QAAI,CAAA,MAAI,CAAC3B,WAAL,CAAiB,CAAE4B,OAAO,CAAED,CAAC,CAAC1B,KAAb,CAAjB,CAAJ,EAHrB,EADJ,CAMI,oBAAC,aAAD,EACI,KAAK,CAAEI,KADX,CAEI,OAAO,CAAEO,OAFb,CAGI,iBAAiB,CAAE,2BAAAe,CAAC,QAAI,CAAA,MAAI,CAAC3B,WAAL,CAAiB,CACrC6B,SAAS,CAAEX,aAAa,CAACS,CAAC,CAACG,MAAF,CAAS7B,KAAT,CAAgB,CAAjB,CAAb,CAAkC8B,IADR,CAAjB,CAAJ,EAHxB,CAMI,QAAQ,CAAEnB,OAAO,CAACE,QAAR,CAAiBD,QAN/B,CAOI,IAAI,CAAEI,IAAI,CAACZ,KAAK,CAACuB,OAAN,CAAgB,CAAjB,CAPd,CAQI,aAAa,CAAEV,aARnB,EANJ,CADJ,CAmBP,CACJ,C,oBA9DgBxB,KAAK,CAACsC,S,EAkE3B,cAAelC,CAAAA,MAAf","sourcesContent":["import React from 'react';\nimport classes from './Layout.module.css';\nimport Mixer from '../../Components/Mixer/Mixer';\nimport Visualisation from '../../Components/Visualisation/Visualisation';\n\n\nclass Layout extends React.Component {\n    state = { }\n\n    pushQueries = value => {\n\n        let oldParameters, queryType;\n        oldParameters = { ...this.props.query };\n        queryType = Object.keys(value)[0];\n        oldParameters[queryType] = value[queryType];\n        const updatedParams = [];\n\n        for (let i in oldParameters) {\n            updatedParams.push(\n                encodeURIComponent(i) + \"=\" + encodeURIComponent(oldParameters[i])\n                );\n            }\n\n        this.props.history.push({\n\t\t\tpathname: this.props.history.location.pathname,\n\t\t\tsearch: \"?\" + updatedParams.join(\"&\")\n\t\t});\n\t}\n    \n    render() {\n        const { \n            data,\n            history,\n            query,\n            keyFigureList,\n        } = this.props;\n\n        //Set searchbar options\n        let dataLanguage = 'Country'\n        if ( history.location.pathname === '/fr') dataLanguage='Country_FR';\n        let countryList = data.map(c => ({ value: c.ISO, label: c[dataLanguage] }))\n\n\n\n        if ( data.length === 0 ||\n            Object.entries(query).length ===0 ){\n                return <div> Loading ...</div>\n            } else {\n                return (\n                    <div className={classes.Layout}>\n                        <Mixer \n                            countryList={countryList}\n                            query={query}\n                            onSearchChange={e => this.pushQueries({ country: e.value })}\n                        />\n                        <Visualisation \n                            query={query}\n                            history={history}\n                            onKeyFigureChange={e => this.pushQueries({ \n                                keyfigure: keyFigureList[e.target.value -1 ].type\n                            })}\n                            language={history.location.pathname}\n                            data={data[query.country - 1]}\n                            keyFigureList={keyFigureList}\n                        />\n                    </div>\n                )\n        }   \n    }\n}\n\n\nexport default Layout;"]},"metadata":{},"sourceType":"module"}